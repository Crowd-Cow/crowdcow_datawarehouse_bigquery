version: 2

models:
  - name: int_visit_flags__joined
    description: "Intermediate model to add various flags to the fact visit data"
    columns:
      - name: visit_id
        description: "Visit ID"
        tests:
          - unique
          - not_null

      - name: user_id
        description: "User ID"

      - name: visit_token
        description: "Visit token"

      - name: visitor_token
        description: "Visitor token"

      - name: visit_browser
        description: "Browser used during site visit"

      - name: visit_city
        description: "Visit city"

      - name: visit_region
        description: "Visit region"

      - name: visit_country
        description: "Visit country"

      - name: visit_ip
        description: "Visit IP"

      - name: visit_os
        description: "Visit OS"

      - name: visit_device_type
        description: "Visit device type"

      - name: visit_user_agent
        description: "Visit user agent"

      - name: visit_referrer
        description: "Visit referrer"

      - name: visit_referring_domain
        description: "Visit referring domain"

      - name: visit_search_keyword
        description: "Visit search keyword"

      - name: visit_landing_page
        description: "Visit landing page"

      - name: visit_landing_page_path
        description: "Visit landing page path"

      - name: utm_content
        description: "UTM content"

      - name: utm_campaign
        description: "UTM campaign"

      - name: utm_term
        description: "UTM term"

      - name: utm_medium
        description: "UTM medium"

      - name: utm_source
        description: "UTM source"

      - name: started_at_utc
        description: "Timestamp for when the visit started UTC"

      - name: updated_at_utc
        description: "Timestamp for when the visit was updated UTC"

      - name: is_wall_displayed
        description: "Boolean indicating whether the wall was displayed"

      - name: is_homepage_landing
        description: "Boolean indicating if this visit landed on the homepage"

      - name: is_bot
        description: "Boolean indicating if this visit was a bot user"

      - name: is_internal_traffic
        description: "Boolean indicating if the visit is coming from a internal traffic"

      - name: has_previous_order
        description: "Boolean indicating if the user associated with this visit has had an order previous to this visit"

      - name: has_previous_subscription
        description: "Boolean indicating if the user associated with this visit already has a subscription"

      - name: had_account_created
        description: "Boolean indicating if the user associated with this visit already created an account"

      - name: did_subscribe
        description: "Boolean indicating if the user associated with this visit became a subscriber during this visit"

      - name: did_sign_up
        description: "Boolean indicating if the user associated with this visit did sign up for an account during this visit"

      - name: did_complete_order
        description: "Boolean indicating if the user associated with this visit did complete an order during this visit"

