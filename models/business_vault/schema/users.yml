version: 2

models:
  - name: users
    description: "Business logic to describe users"
    columns:
      - name: user_id
        description: "User ID"
        tests:
          - unique
          - not_null

      - name: phone_number_id
        description: "Phone number ID that can be joined to the phone number table"

      - name: user_type
        description: "User type"

      - name: first_name
        description: "User first name"

      - name: last_name
        description: "User last name"

      - name: user_gender
        description: "User gender"

      - name: user_email_name
        description: "User email name"

      - name: user_email
        description: "User email address"

      - name: phone_number
        description: "User's current phone number"

      - name: phone_type
        description: "Phone type (e.g. Mobile, landline, etc)"

      - name: user_roles_for_access
        description: "User roles for access given to Crowd Cow employees"

      - name: state_code
        description: "State code of the zip the user entered into the Crowd Cow site"

      - name: city_name
        description: "City name of the zip the user entered into the Crowd Cow site"

      - name: user_zip
        description: "User zip"

      - name: user_token
        description: "User token"

      - name: user_referrer_token
        description: "User referrer token"

      - name: user_cow_cash_balance_usd
        description: "Cow Cash balance in USD"

      - name: user_support_status
        description: "User support status"

      - name: customer_cohort_date
        description: "Assigns the user to a customer cohort that starts on the date of their first paid/uncancelled order"

      - name: membership_cohort_date
        description: "Assigns the user to a membership cohort that starts on the date of their first paid/uncancelled membership order. The user stays in this cohort even if they cancel this membership and sign up for a new one later."

      - name: average_order_frequency_days
        description: "The average number of days between paid orders for a user"

      - name: average_membership_order_frequency_days
        description: "The average number of days between paid membership orders for a user"

      - name: average_ala_carte_order_frequency_days
        description: "The average number of days between paid ala carte orders for a user"

      - name: days_from_ala_carte_to_membership
        description: "The number of days a customer takes to go from being an ala carte only customer to a member"

      - name: lifetime_net_revenue
        description: "The total net revenue over the lifetime of a user"

      - name: lifetime_paid_order_count
        description: "The total number of paid orders over the lifetime of a user"

      - name: total_completed_unpaid_uncancelled_orders
        description: "The total number of checkout completed orders that have not been paid or cancelled for a user"

      - name: total_paid_ala_carte_order_count
        description: "The total number of paid, uncancelled ala carte orders for the user"

      - name: total_paid_membership_order_count
        description: "The total paid, uncancelled membership orders for a user"

      - name: last_90_days_paid_membership_order_count
        description: "The total number of paid membership orders in the last 90 days for a user"

      - name: last_90_days_paid_order_count
        description: "The total number of paid orders for a user over the past 90 days"

      - name: last_180_days_paid_order_count
        description: "The total number of paid orders for a user over the past 180 days"

      - name: twelve_month_purchase_count
        description: "The total number of paid orders for a user over the past 12 months"

      - name: total_paid_gift_order_count
        description: "The total number of gift orders for a user"

      - name: recent_delivered_order_count
        description: "The total number of delivered orders for a user over the past 7 days"

      - name: six_month_net_revenue
        description: "The total net revenue for a user over the past 6 months"

      - name: twelve_month_net_revenue
        description: "The total net revenue for a user over the past 12 months"

      - name: six_month_net_revenue_percentile
        description: "The percentile rank of a user based on total net revenue amount over the past 6 months"

      - name: twelve_month_net_revenue_percentile
        description: "The percentile rank of a user based on total net revenue amount over the past 12  months"

      - name: lifetime_net_revenue_percentile
        description: "The percentile rank of a user based on total net revenue amount over the lifetime of a user"

      - name: attributed_visit_id
        description: "The visit id attributed to the acquisition of a user. If the first completed order for a user is within 10 days of when the user account was created, this is the first visit to the site. If the first completed order is more than 10 days from user creation, this is the visit id associated with the first completed order for a user"

      - name: last_email_preference_date
        description: "Timestamp of when the user last changed their email frequency preference"

      - name: user_email_preference
        description: "The user's email frequency preference. Set to `OFTEN`, `WEEKLY`, `UNSUBSCRIBED ALL`, `NO SETTING`"
      
      - name: is_member
        description: "The user has had at least one membership at some point. The membership can be cancelled or uncancelled. If this value is FALSE, the user has never had a membership."

      - name: is_cancelled_member
        description: "The user has had at least one membership and all of them have been cancelled. If this value is FALSE, the user is an uncancelled member."

      - name: is_lead
        description: "The user has a Crowd Cow account but has never had any order activity. No order created, completed, cancelled, paid, etc."

      - name: is_purchasing_customer
        description: "The user has placed at least one paid/uncancelled non-membership order"

      - name: is_purchasing_member
        description: "The user has placed at least one paid/uncancelled membership order"

      - name: is_active_member
        description: "The user has had at least one paid/uncancelled membership order in the past 90 days. If this value is FALSE, the user is an inactive member."

      - name: does_allow_sms
        description: "Boolean indicating if the user's phone number allows SMS texting"

      - name: has_opted_in_to_emails
        description: "Boolean indicating if the user has opted in to receiving emails"

      - name: user_last_sign_in_at_utc
        description: "User last signed in timestamp in UTC"

      - name: created_at_utc
        description: "Timestamp for when the user was created in UTC"

      - name: updated_at_utc
        description: "Timestamp for when the user record was updated in UTC"
      
      - name: is_banned
        description: "User has been banned"

